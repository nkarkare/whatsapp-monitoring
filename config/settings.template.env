# WhatsApp Monitoring Configuration

# WhatsApp Bridge Configuration
MESSAGES_DB_PATH=/path/to/whatsapp-mcp/whatsapp-bridge/store/messages.db
WHATSAPP_API_URL=http://localhost:8080/api/send

# Message Monitoring
CLAUDE_TAG=#claude
TASK_TAG=#task
POLL_INTERVAL=10
DEFAULT_CONTEXT_MSGS=5

# Logging Configuration (Optional)
# LOG_LEVEL options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Set to DEBUG to see detailed polling and message tracking logs
# Set to INFO (default) for normal operation with minimal logging
LOG_LEVEL=INFO
MAX_LOG_SIZE_MB=10
LOG_BACKUP_COUNT=5

# Claude AI Configuration
CLAUDE_API_KEY=your_claude_api_key_here
CLAUDE_API_URL=https://api.anthropic.com/v1/messages
CLAUDE_MODEL=claude-3-opus-20240229

# ERP System Configuration
# Replace these with your actual ERP API credentials
ERPNEXT_API_KEY=your_erp_api_key_here
ERPNEXT_API_SECRET=your_erp_api_secret_here
ERPNEXT_URL=https://your-erp-server.com

# Message Templates (Optional - Customize response messages)
# Available variables: {emoji}, {task_id}, {subject}, {priority}, {due_date}, {assigned_to}, {task_url}, {error}
TASK_SUCCESS_EMOJI=✅
TASK_ERROR_EMOJI=❌
# TASK_SUCCESS_TEMPLATE=Your custom success message with {task_id} and {subject}
# TASK_ERROR_TEMPLATE=Your custom error message with {error}
# TASK_SIMPLE_SUCCESS_TEMPLATE=Your custom simple success message
# TASK_HELP_TEMPLATE=Your custom help message

# Note: The system will automatically create tasks when it detects #task in messages
# You can use either format:
# 1. Simple: "#task Your task description"
# 2. Detailed template with Subject, Description, Priority, Due date, Assigned To

# ============================================================================
# MCP Server Configuration (for Claude Code integration)
# ============================================================================

# Admin WhatsApp number for user disambiguation (without + prefix)
# This number receives disambiguation messages when multiple users match
ADMIN_WHATSAPP_NUMBER=917498189688

# Default user to assign tasks when no assignee is specified
# Should be a valid ERPNext user email
DEFAULT_TASK_ASSIGNEE=your.email@company.com

# User resolution timeout (seconds)
# How long to wait for admin response when disambiguating users
USER_RESOLUTION_TIMEOUT=300

# Enable MCP server functionality
# Set to false to disable MCP server features
ENABLE_MCP_SERVER=true

# MCP server port (if using HTTP transport instead of stdio)
# Leave commented to use stdio transport (recommended for Claude Code)
# MCP_SERVER_PORT=3000

# Fuzzy matching threshold (0-100)
# Minimum match score to consider a user match valid
# Higher values require closer matches
FUZZY_MATCH_THRESHOLD=80

# Maximum user suggestions for disambiguation
# How many candidate users to show when disambiguation is needed
MAX_USER_SUGGESTIONS=5

# ============================================================================
# Daily Summary Configuration
# ============================================================================

# Enable/disable daily summary feature
DAILY_SUMMARY_ENABLED=false

# Time to send daily summary (24-hour format HH:MM)
DAILY_SUMMARY_TIME=09:00

# Recipient phone number for summaries (without + prefix)
# Example: '917498189688'
DAILY_SUMMARY_RECIPIENT=''

# Group JIDs to monitor for summaries (comma-separated, in quotes)
# Example: '123456789@g.us','987654321@g.us','555555555@g.us'
# Use scripts/list_groups.py to find your group JIDs
DAILY_SUMMARY_GROUPS=''

# Timezone for scheduling (e.g., Asia/Kolkata, America/New_York, UTC)
DAILY_SUMMARY_TIMEZONE=Asia/Kolkata

# ============================================================================
# Keyword Monitoring Configuration
# ============================================================================

# Enable/disable keyword monitoring feature
KEYWORD_MONITORING_ENABLED=false

# Recipient phone number for keyword alerts (without + prefix)
# Example: '917498189688'
KEYWORD_ALERT_RECIPIENT=''

# Keywords to monitor (comma-separated, case-insensitive, in quotes)
# Example: 'urgent','critical','help','emergency','bug','error'
MONITORED_KEYWORDS=''

# Group JIDs to monitor for keywords (comma-separated, in quotes)
# Use 'all' to monitor all groups, or specify specific JIDs
# Example: '123456789@g.us','987654321@g.us' or 'all'
MONITORED_GROUPS=''

# Minimum seconds between alerts for same keyword (to prevent spam)
KEYWORD_ALERT_COOLDOWN=300